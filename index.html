<!DOCTYPE html>
<html lang="en" dir="auto">
<head>
	<meta name="generator" content="Hugo 0.104.3" /><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>往东行</title>
<meta name="description" content="西方有真经，我往东行">
<meta name="author" content="wangdongxing">
<link rel="canonical" href="https://salmon3g.github.io/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a14448c07cddf5a1fec9468e66fa046c84c03fb15b3b7b26e79bd43b6361e01a.css" integrity="sha256-oURIwHzd9aH&#43;yUaOZvoEbITAP7FbO3sm55vUO2Nh4Bo=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://salmon3g.github.io/img/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://salmon3g.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://salmon3g.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://salmon3g.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://salmon3g.github.io/apple-touch-icon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://salmon3g.github.io/index.xml">
<link rel="alternate" type="application/json" href="https://salmon3g.github.io/index.json">
<noscript>
  <style>#theme-toggle,.top-link{display:none;}</style>
  <style>
      @media (prefers-color-scheme: dark){
        :root {
          --theme: rgb(29, 30, 32);
          --entry: rgb(46, 46, 51);
          --primary: rgb(218, 218, 219);
          --secondary: rgb(155, 156, 157);
          --tertiary: rgb(65, 66, 68);
          --content: rgb(196, 196, 197);
          --hljs-bg: rgb(46, 46, 51);
          --code-bg: rgb(55, 56, 62);
          --border: rgb(51, 51, 51);
        }
        .list {background: var(--theme);}
        .list:not(.dark)::-webkit-scrollbar-track {background: 0 0;}
        .list:not(.dark)::-webkit-scrollbar-thumb { border-color: var(--theme);}
      }
  </style>
</noscript>
<meta property="og:title" content="往东行" />
<meta property="og:description" content="西方有真经，我往东行" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://salmon3g.github.io/" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="往东行"/>
<meta name="twitter:description" content="西方有真经，我往东行"/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "往东行",
  "url": "https://salmon3g.github.io",
  "description": "西方有真经，我往东行",
  "thumbnailUrl": "https://salmon3g.github.io/img/favicon.ico",
  "sameAs": [
      "mailto:datapig@126.com", "index.xml"
  ]
}
</script>
</head>
<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://salmon3g.github.io" accesskey="h" title="往东行 (Alt + H)">往东行</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://salmon3g.github.io/categories/pm/" title="产品">
                    <span>产品</span>
                </a>
            </li>
            <li>
                <a href="https://salmon3g.github.io/categories/reading/" title="阅读">
                    <span>阅读</span>
                </a>
            </li>
            <li>
                <a href="https://salmon3g.github.io/categories/analytics/" title="分析">
                    <span>分析</span>
                </a>
            </li>
            <li>
                <a href="https://salmon3g.github.io/categories/life/" title="生活">
                    <span>生活</span>
                </a>
            </li>
            <li>
                <a href="https://salmon3g.github.io/archives/" title="归类">
                    <span>归类</span>
                </a>
            </li>
            <li>
                <a href="https://salmon3g.github.io/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://salmon3g.github.io/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="https://salmon3g.github.io/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<article class="first-entry home-info">
    <header class="entry-header">
        <h3>Hi there 👋</h3>
    </header>
    <div class="entry-content">
        <ul><li>Welcome to my blog ✨</li> <li>I will share my work 👨🏻‍💻 and life 🏖 notes here.</li> <li></li> <li>博学慎思，明辨笃行。</li> <li>数据行业从业 10 年，目前在鹅厂做数据产品经理。更多介绍见：<a href="/about">关于</a></li> </ul>
    </div>
    <footer class="entry-footer">
        <div class="social-icons">
    <a href="mailto:datapig@126.com" target="_blank" rel="noopener noreferrer me" title="Email">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 21" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
    <polyline points="22,6 12,13 2,6"></polyline>
</svg>
    </a>
    <a href="index.xml" target="_blank" rel="noopener noreferrer me" title="RSS">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9" />
    <path d="M4 4a16 16 0 0 1 16 16" />
    <circle cx="5" cy="19" r="1" />
</svg>
    </a>
</div>

    </footer>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>一些工作方法论
    </h2>
  </header>
  <div class="entry-content">
    <p>在工作，不知道你有没有思考过这样的问题，Leader 在安排事情的时候是怎么安排的，为什么这件事给 A 做会觉得比较放心，给 B 做心里会没底？ 尝试从大佬们的角度去分析问题，会发现大佬们的一些做事的方法论，这里总结一下，大家一起学习讨论。同一件事情，不同的人做，结果不一样，取决于有的人“会做事”、有的人“不会做事”；给 A 做比较放心，因为 A 一直都“会做事” 。
会做事的总体思维结构是：做事要有闭环思维，也就是一件事情必须要做好事“事前”、“事中”、“事后”这三个闭环，很多人“不会做事”，是因为都只关注到 “事中”，事前大部分都是 Leader 安排好了，自己没有思考过为什么要做这件事、目标是啥；至于事后，由于项目紧张，事情做完很快就投入到另一件事情了，关于这件事后续如何，如果不是出了线上问题，或者 leader 过问，自己很少会去关注。其实大家技术都差不多，但思维上的细微偏差，长此以往可能就会导致截然不同的发展轨迹，这里围绕“事前-事中-事后”这个闭环思维去展开各个环节中的一些方法论吧。
事前分析 “为什么要做这件事？”，“痛点是什么？”，这是很多大佬经常问的问题，往往是在你滔滔不绝地介绍方案的时候，大佬们就用这个问题打断了你，既然大佬们经常问，说明背后一定有其深层原因，结合我自身的理解，尝试从产品需求类来分析这个思考的必要性。
产品需求类： 很多人说， 这个产品都已经思考好了，照着做就是了，哪来那么多为什么呀？的确，在我们接到需求之前，领导应该都思考的很周全了，但是我们还是要去理解一下需求背后的深层原因，一方面能够加深对需求的理解、提高业务理解能力，另一方面也能通过对需求本质的理解在设计方案的时候思路更清晰，当别人问到时，能结合需求业务场景和扩展性等作出清晰的解释。
2P挖掘法
知道经常被问和理解其必要性之后，我们就来准备怎么才能清晰回答这些问题，要想应对自如，就是提前问自己；方法论是：“2P挖掘法”， 即，至少找出个痛点或者两个论据来支持你做这件事的必要性， 这个两个痛点不是拍脑袋或凭感觉，最好要有严格的数据说明； 例如现在要对一个产品模块重构，痛点是： 1. 流程复杂，影响用户使用效率；2. 各功能间耦合严重，迭代和维护成本高。 为了进一步说明这个痛点有多痛， 可以用一些数据说明，例如用户使用一次需要 10 分钟， 100人的团队， 一天花费的时间就是 1000 分钟； 如果重构后，使用一次降低到 2 分钟，一天就能节约 800 分钟。如果每件事情都逼迫自己至少挖出两个以上类似的痛点或论据，后续被问到 why 的时候，一定能应对自如，因为你早就已经经过了深思熟虑。
事中执行 想清楚为什么做这件事之后，做的时候就能放开顾虑去做了， 包括方案设计、落地实施、问题处理等重要的步骤。
“你为什么选择这个方案？”、“你的方案考虑过xxx这种情况吗？”、“业界是怎么做的？为啥不使用xxx方案？”，这些都是在一场产品评审会上被问得最多的问题，如果你的回答是支支吾吾、临时拼凑，那么就会给人留下你没有深入研究的印象。 解决这个问题的方法是：每次设计方案的时候逼迫自己想出三个备选方案，如果你想出了三个方案，那么前面提到的哪些问题，你一定都提前问过自己了。
3C方案设计法
3C ，即三个 Choice, 主要是逼迫自己去想更多的可能性，横向对比行业是怎么做的，是不是可以拿来用，自身业务情况下是不是有更多选择，严格按照这个思维去做方案， 久而久之也会无形中提高自己的深度和广度，有人可能会觉得浪费时间，想快，这也是人的天性，但是我们用这些方法论不就是对抗人性的弱点吗？ 如果为了快，方案没想清楚，需求评审会上被问到时才临时思考，浪费了大家的时间，即使匆忙开发上线，最终也会因为返工浪费的更多的时间，还给合作的伙伴们留下不好的印象， 所以”3C“还是值得花时间去做的。
落地实施的进度条
方案设计之后，就是怎么推动事情落地了。首先把任务按照依赖关系最小粒度的划分，然后排上计划，执行的时候就开始了我们的进度条，如果太长，可以划分为 2~3 个里程碑，执行过程随时检测进度，是不是存在风险。需要注意的是， 在拆解任务的时候尽量识别出依赖或被依赖的关键节点，尽早安排，实际开发中， 工作量评估最常见的盲区就是忽略了跨组联调、对接话的时间，这些节点往往也容易成为项目进度风险的关键因素。
借助他人的力量
切记不要自己一个人埋头苦干，希望自己能搞定一切事情，怕打扰他人，但是有些事情或许和别人聊聊，向其他有经验的人请教，会豁然开朗。如果需要他人配合才能完成，甚至需要依赖外部团队，怎么推动他人按照自己的计划配合完成事情呢？ 这里我觉得和平时做人有些关系（并不是指人品好坏），如果是熟人、或有交情的人，推动起来就事半功倍；如果不熟悉，而且对方没有收益，那确实不太好推动。所以平时要和兄弟团队多打打招呼、多认识认识会有些好处。 如果自己无法驱动时，可以借助 leader 的力量， leader 出面，对方也会重视起来，别人配合你做事也有名有分。
5W根因分析法
5W根因分析法又称丰田5问法，最初是由丰田集团创始人丰田佐吉提出的, 这方法论指导丰田成为世界名企。实践应用中，不一定要问5个问题，有时可能问到第三个就找到了根本原因了，这里需要注意的时，在连续追问的时候可能容易挑起情绪化，认为发问者是在刁难你，容易引发撕逼；问之前也可以强调下，接下来我们要用5W根因分析法找原因了，大家不要情绪化。我相信大家在实际过程中都被 leader 的连环夺命问折磨过， 解决的方法是：提前用连环夺命问先折磨自己，避免同步问题的时候被 leader 连环夺命问折磨。
事后总结 很多人，事情做完了，leader 不问，自己也很少去总结。 但是辛辛苦苦做完事情，如果不去做一个总结的话，其实是比较亏的；到不一定是为了让 Leader 知道了做了这件事取得了什么成果（当然这个也很重要），更重要的是给自己一个总结、帮组自己成长。哪些没做好需要提升，哪些是做的好的，有没有什么亮点、难点、挑战等（也许半年后你准备晋升材料的时候正为这些发愁）。
3D总结法
从四个维度对这件事情做个总结：结果、数据、个人成长三个维度
结果： 做完这件事，我们取得了什么结果？可能是用户使用效率提升了，也可能是 DAU 提升了，或者用户体验提升了。
数据： 这个是对结果的补充，用客观的数据更能证明项目的成果。
个人成长： 比如在执行力上、事情推动力上、方法论沉淀等软实力上是不是也有收获。
最后一张图总结大佬们一些做事方法论：</p>
  </div>
  <footer class="entry-footer"><span class="more-meta">  </span><span title='2021-11-20 11:30:00 +0000 UTC'>2021-11-20</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 一些工作方法论" href="https://salmon3g.github.io/posts/life/work-methodology/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>优秀的商业智能和数据可视化产品：Power BI
    </h2>
  </header>
  <div class="entry-content">
    <p>Power BI 是 Microsoft 出品的一套商业智能体系（包括软件，工具，服务等），可用来构建从个人到中大型企业组织的商业智能平台，便于产品、运营、数据分析师等用户探索和分析数据。
和 Tableau 一样，Power BI 也支持非常丰富的数据源，接入数据源后也可以快速实现数据可视化及分析探索；同时，Power BI 也在 Gartner 分析和商业智能魔力象限中被评为领导者，BI(商业智能)和可视化方面十分优秀。
PowerBI运行逻辑 PowerBI 整体的运行逻辑是先把数据源按指标场景「筛选」数据、生成「度量值」后，把度量值作为生成图表的「上下文」及依据。
这个过程涉及几个核心的模块：数据建模、筛选器、度量值。
数据建模 利用 SQL 的思维去看 PowerBI 有助于我们理解它的运行逻辑，尤其是在数据建模阶段。
我们在使用数据库的时候，经常需要通过 Join 方法把不同表格的数据连接起来，用于实现多字段的数据提取及不同维度的计算，但在 PowerBI 并不需要这么麻烦，它是通过数据建模来解决这个问题的。
在 PowerBI 中，数据建模的重要性就好比透视表之于 Excel，因为如果没处理好它，后续的度量值、切片器等工具都会出问题，更不用说计算结果了。
什么是数据建模 数据建模是分析的基础，从形式上看，数据建模就是把多个表格关联起来。但它的实际内涵不至于此，我们可以借用 Excel 里的数据透视表来理解数据建模：
为了更好地理解，我们先回归到 数据分析的底层逻辑：报表分析 =分类维度x事实指标。
比如业务提数据需求说：要按月看不同品类的销售额。
在这个需求中，业务要看的 事实指标 是 销售额，其余描述该指标的&#34;形容词&#34;就是 分类维度： 按月(时间日期分类)、不同品类(商品品类分类)。
更直观地从 Excel 透视表来看，行、列标签就是需要透视的维度，表格中的值则是按公式计算的事实指标：
基于该分析逻辑，从应用分析层反推到表格层面，可以把表分为维度表与事实表。 在具体使用时，只需要从维度表中选择需要透视（分析）的维度，再从事实表计算指标即可完成报表分析。
这个数据建模类型，有一个更专业的名字：维度建模。
比如上图的案例是计算每个月不同产品分类的销售额：订单表就是事实表，产品规格、产品表、日期表就是维度表；为了能实现上表的计算需要把事实表和维度表建立关系，这个建立关系的过程，就是数据建模。
如图，订单表与产品规格表，通过字段sku连接起来; 产品表和产品规格表通过字段spu连接起来。
关系 数据库表连接中，重要的是不同连接方法，那接下来就谈谈 PowerBI 数据建模中的 表间「关系」 。
首先要注意，用户创建关系的列，必须是一样的，且只能通过一个字段连接。
关系的类型 概括来说，数据模型中共有三种关系
多对一、一对多：比如学生和校长之间就是多对一的关系，一个学校有多个学生，但只有一个校长。这是数据建模中最为常见且建议使用的关系类型。 一对一：比如班级和班主任就是一对一的关系，每个班有且只有一个班主任，每个班主任也只带一个班。 多对多：比如学生和任课老师的关系，每个学生有多个科目的老师，每个老师向多个学生教授知识。一般情况下不建议采用这种关系，因为多对多筛选会很容易导致筛选混乱，且性能较差。 遇到多对多关系时，一般的解决方案就是拆表：在两个表中间插入多一个中间表。比如学生和任课老师之间，插入学校表：多个学生对应一个学校，一个学校对应多个任课老师。
关系链 关系有一个重要属性，那就是关系可以形成链条，比如上图案例中，订单表中记录的商品是到 SKU 级别，所以订单表和产品规格表通过 SKU 建立关系，而多个 SKU 可能对应一个 SPU，所以产品规格表和产品表通过 SPU 建立关系。
当我们要从 SPU 层级来做汇总分析时，这个订单表-产品规格表-产品表这个关系链就能起作用，可以计算比如产品类别的合计销售金额。
此时再回到前面遇到多对多关系时的解决方案，就能理解之所以能通过插入中间表解决，就是因为关系链的存在：学生-学校-任课老师。
关系方向 在上图案例中，我们观察到，关系是存在方向的，准确来说这个箭头确定了筛选的方向，比如图中产品规格表和订单表之间一对多的关系是从产品规格表指向了订单表，也就是可以通过产品规格表的字段来筛选分析订单表， 但订单表不能反过来筛选分析规格表。
一般来说 不建议使用双向筛选的关系 ，尤其是在复杂数据模型中，双向筛选会导致同一个筛选条件产生多条数据流向，进而产生不同的计算结果。
筛选器 PowerBI 有两个地方可以使用筛选器，一个是筛选器栏，一个是切片器，它们的功能是一样的：在计算之前对数据进行过滤。
假设我们现在有公司总的销售额，想要看单个品类，比如数码产品的销售额，就可以把字段&#34;品类&#34;拖拽到筛选器，或者在报表页面新建一个切片器，把字段&#34;品类&#34;拖拽到切片器，然后再选择品类：数码产品，此时页面呈现的数据就是数码产品的销售额。
那在实操中，一般放什么到过滤器里？前面数据建模小节中，我们介绍了维度建模，在分析数据时， 用维度透视事实数据，也就是说，我们一般是要把维度表里的维度放到过滤器中。
比如前面案例中，订单表是事实表，产品表是维度表，我们要做过滤筛选时，就要把产品表里的维度放到过滤器中，比如按产品类型、按品类对销售订单进行过滤。
度量值 度量值是 PowerBI 战斗力的核心，通过它，使用者可以轻松实现许多复杂的计算。
什么是度量值？ 简单来说度量值是一个计算器，设计好函数公式后，输入指定的数据，返回计算结果。
更形象来说，度量值是一个&#34;便携式的计算盒子&#34;，可以放到不同上下文里，用同样的公式计算出不同的结果。
更准确来说，度量值是一个虚拟字段，它不会固定在某个表里，因此也不会改变数据结构。前面说它是&#34;便携的计算盒子&#34;，是因为它的使用方式是要把它拖拽到不同报表里，呈现计算结果，同时它又随着过滤器的筛选而变化，也可以说它是在与报表交互时才使用的。
如图，新建一个度量值 [销售额] = sum(‘订单表’[销售额]) 用于计算「合计」的销售额指标，但是它放到不同类别的表格中，统计的就是不同子类别的合计销售额，而把它单独放出来，就是所有品类的合计销售额。
度量值与Excel透视表 为了帮助理解度量值，可以拿我们最为熟悉的Excel透视表来作对比：
透视表 = 筛选&#43;列&#43;行&#43;值 度量值 = 上下文&#43;筛选计算 由这两个公式可以看出，度量值里的上下文可以显性地对应到透视表里的行和列，但是它还有隐形的关系链，筛选器的作用能通过这条关系链传递，所以度量值的上下文具有灵活的定义。
而度量值里的 筛选计算 就类似于透视表里的筛选和值，其中值就是公式的计算结果。...</p>
  </div>
  <footer class="entry-footer"><span class="more-meta">  </span><span title='2020-03-19 14:08:00 +0000 UTC'>2020-03-19</span>&nbsp;·&nbsp;3 min</footer>
  <a class="entry-link" aria-label="post link to 优秀的商业智能和数据可视化产品：Power BI" href="https://salmon3g.github.io/posts/pm/powerbi/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>企业级开源可视化报表平台：Superset
    </h2>
  </header>
  <div class="entry-content">
    <p>Apache Superset 是一款由 Python 语言为主开发的企业级数据探索分析以及可视化的报表平台，由 Airbnb 开源，后面进入 Apache 软件基金会孵化。支持丰富的数据源和可视化图表样式，国内外已经有很多知名企业在使用了，如Airbnb、Netflix、Dropbox、Twitter、去哪儿、B站、豆瓣、腾讯音乐等。
特征 开源，轻量级、高可用，使用维护简单且便于二次开发 可视化方面非常出色，报表、看板等表现力很好 操作便捷，拖拉拽简单操作便可无代码生成可视化图表 图表类型丰富，有时间序列、组合图、分布图、关系图、GEO地理位置、词汇云、等40多种图表类型 支持数据源丰富，包括Clickhouse、Presto、Durid、Kylin、Impala、Hive、MySQL、Oracle等30多种数据源 先进的SQL IDE，底层配合Clickhouse，自助SQL跑数神器 支持灵活添加自定义可视化插件的能力 实操 我请我同事帮忙写了一份入门教程，具体操作如下：
1、添加database 2、添加Table 3、SQL查询(生成视图表) 4、绘图 5、设计Dashboad 6、共享Dashboard
方法1：添加DB权限。为观看者添加Charts的DB权限，会自动包含Table(原生表&#43;视图表)的接入权限，则可观看对应Charts和Dashboard的权限。此时，Dashboard添加同DB下的Chart，不需要重新授权。
方法2：添加表权限。如果在Dashbaord新增了Charts，则需要编辑保存授权。
为用户添加表权限或者DB权限 先为角色添加权限。有DB权限会自动有表权限，可仅授予表权限 在将角色绑定到用户 其他 通过二次开发，可以将看板推送到企微群，例如团队内日报群，运维报警群等。 异步查询架构 Echart Demo </p>
  </div>
  <footer class="entry-footer"><span class="more-meta">  </span><span title='2020-03-14 13:46:00 +0000 UTC'>2020-03-14</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 企业级开源可视化报表平台：Superset" href="https://salmon3g.github.io/posts/pm/superset/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>读书笔记 | 俞军产品方法论
    </h2>
  </header>
  <div class="entry-content">
    <p>俞军老师的《俞军产品方法论》这本书我读了两遍，书中除了详细介绍了理解企业、用户、产品、交易、决策等产品经理必备的知识外，还比较全面的介绍了产品经理岗位需要掌握和了解的底层知识，如经济学、心理学、组织行为等。虽然没有全面展开，却能起到引导作用，这在其他产品经理相关的书籍中很少见到。
推荐从事产品经理相关的职业的同学阅读此书。
企业 用户 产品 企业、用户与产品关系 用户价值和企业商业价值的关系是：企业以产品为媒介，与用户 进行价值交换，达成创造商业价值的目的。
用户的定义 从产品经理视角看用户：用户不是自然人，而是需求的合集； 用户的五个属性：异质性、情境性、可塑性、自利性、有限理性。
异质性：用户的特点千差万别； 情境性：用户的行为和反应会受情境影响； 可塑性：用户的偏好和认知会随着外界不同信息刺激发生变化和演化； 自利性：用户追求个人总效用最大化； 有限理性：用户虽追求理性，但能力是有限的。 理解用户的行为 用户行为背后的机制图：
理解用户价值 对用户来说，价值由主观效用决定。产品的用户价值也是主观属性，是由买方(或使用者)的主观效用评价来定义的。用户感知到的价值才是用户价值。
用户价值(主观效用)具备认知依存、情境依存、经验反馈演化三个特性。
认知依存：用户的认知决定了他的偏好； 情境依存：用户的偏好在不同情境下的行为不同； 经验反馈演化：用户的偏好根据经验反馈不断变化。 用户价值=新体验-旧体验-替换成本
理解产品 好产品的三个属性：有效用(用户价值)、有利润(企业获利)、可持续。
交易 交易模型的设计精髓：如何创造利益(利益从何而来)及如何分配利益(利益去往何处)。理解交易模型切入点：
损失厌恶：人们面对同样数量的收益和损失时，认为损失更加难以忍受；同量的损失带来的负效用为同量收益的正效用的 2.5 倍； 选择增加福利：在不增加交易成本的前提下，增加选择； 激励相容：在市场经济中，每个参与者都会按实现个人利益最大化的策略行动。简单讲，就是让对方干得好比干得不好时获得更多 收入，对方才有上进的动力。
效用 产品经理掌握 效用、边际、成本、供需定律这 4 个经济学概念，才算过了及格线。
效用解释
书中解释：效用是欲望的满足程度，人通过消费物品和劳务满足欲望； 维基百科解释：是微观经济学中最常用的概念之一。一般而言，效用是指对于 消费者对各种商品和服务的消费或投资的相对满意度的度量。 效用两条原理
边际效用递减原理：随着财富的增加，满足程度的增加速度不断下降； 最大效用原理：在风险和不确定条件下，个人的决策行为准则是为了获得最大期望效用值而非最大期望金额值。 幸福方程式：幸福=效用/欲望 产品效用对用户需求的满足程度分为：底线需求(不能低于)、够用就好(不用高于)、越多越好(愿意多支付)、惊喜(超过预期或参考系)。
边际 边际：额外增量； 边际效用：消费者对某种物品的消费量每增加单位所增加的额外满足程度； 边际效用递减：吃完 6 个苹果后，越吃越没有吃第一个那么开心； 边际成本：一年造 100 辆汽车和一年造 10000 辆汽车公司比，造 10000 辆汽车的公司成本更低；但超过临界点后，可能会变高； 边际利润：在一个给定约束条件下，再多做一笔交易，增加的额外利润。 成本 机会成本：企业为从事某项经营活动而放弃另一项经营活动的机会 ； 交易成本：指完成一笔交易时，交易双方在买卖前后所产生的各 种与此交易相关的成本；产品角度概括交易成本来源：信息不对称、信息不确定、信息不完整和信息有成本；降低方法：标准化、线上化 供需定律 供需定律：其他条件不变时，价格下降，需求上升（非永恒不变的真理，需要分辨清楚其他约束条件是否发生了变化）。
相对价格 人间第一定律：其他条件不变时，相对价格降低，需求量上升。
相对价格=（直接成本&#43;交易成本）/效用组合
决策 人类的决策天生就是不理性的。
理性决策三要素 理性决策的三要素，按重要性由高到低依次是：理性的信念、理.性的目标、理性的行动。
理性的信念：与真实世界一致的信念，也可以理解成「对自我认知的认知」。人类最大的理性，是理性地理解自身认知能力的局限性。 理性的目标：约束条件下的价值(总效用)最大化。应保持对当前目标的反思：我的目标(或任务)理性吗?为什么不能是其他目标呢?从确定这个目标到现在，有什么关键变量(约束条件)已发生变化或将会发生变化? 理性的行动：在给定目标下，寻找最优解决方案。 现实中，没有刻意训练过的产品经理，大多数人都仅徘徊于第三项：寻找最优解决方案。但前两项更重要，如果第三项有所成就，决策的边际收益更依赖前两项。目标如果错了，在错误的目标下得到的最优解，跑得越快，也只是错得更多。如果对相关问题的认知缺陷很严重，就只能定出自以为理性，实际却谬以千里的目标。
决策即选择 产品经理做决策前，首先需要列举各种可能性，应具备思考的广度。产品经理的工作核心，最终都是权衡。
狭义设计理念(好创意、自我表达、好审美等)其实只是选择去满足一小部分用户的诉求，只能在小众市场成功。而互联网产品做大后都是平台，就不适合运用创意思维和设计师思维了，需要适当引入经济学思维，习惯于权衡取舍，追求整个系统的效率。
价值最大化 用户价值=新体验-旧体验-替换成本 产品经理要么降低自己用户的替换成本，要么提升竞品用户的流失成本(提高竞品的替换成本) 净收入=毛收入-机会成本-交易成本 决策方法 数据决策：数据对于做产品的价值，一般是作为做正确决策和达成共识的最低成本工具； AB测试：可以事后选择已经验证的更优策略。对于适合它的题型来说，进行AB测试就是在偷看答案后结题。 逻辑决策：也叫「讲理决策」，结论靠逻辑推导得来。但需要对方具备相应的认知水平，否则就会鸡同鸭讲； 主观判断决策：是最难的决策，没有数据或逻辑支撑，只能用关键变量和用户模型、交易模型来模拟市场运行，并据此做出判断(经济学家奈特提出，员工对不确定世界的预判能力差别很大，企业家的超额利润都来自识别任用判断力更优的员工)。 常见的决策无趣之认知偏误 认知偏误是指在某些特定情况下的特定思考、行为倾向，会导致 理性或判断产生系统性偏误 。产品经理作为研究人的职业，关于认知偏误的知识是其必修课, 既要极力避免自己犯这些错，也要从这些角度理解人性，理解一些用 户行为背后的原理。
归因偏误，把良好行为或成功归于自身。三维归因理论：特殊性(情境)、一致性(他人)、一贯性(个人)； 锚定效应，为不熟悉的事物估值时，会把熟悉或最近接触的无关数值当做「锚」，估出来的数值会倾向于「锚」。类型现象：幸存者偏差、峰终定律、框架效应、心理账户、损失厌恶； 选择性注意，忽略不符合自己期望的东西； 刻板印象，对某人或一类人产生比较固定的、类化的看法；类似的现象：地域歧视、光环效应、外群体同质性偏见、首因效应； 自我中心偏误，自我美化偏误、支持选择偏误、错误共识效应、投射偏误、素朴实在论、控制错觉、达克效应、逆火效应、证实偏见、舒适区效应； 信念偏误，可得性偏误、频率错觉、后见之明偏误、可获性层叠(三人成虎)、货币错觉、一致性偏误、巴纳姆效应(算命)、基本比率忽略、赌徒谬误、你赌徒谬误； 决策类偏误，结果偏误、道德评价偏误、资讯偏误、共有资讯偏误、集体错觉、从众效应、沉没成本谬误； 产品经理选拔 晋升和职级标准制定的理性目标应该是为公司发展服务。最合理的标准需要考虑公司内部业务和人才的现状、未来发展预期,，来决定公司未来一段时间应该侧重激励什么 。侧重短期绩效，还是注重潜力，还是注重专业能力等。
面试产品人才时，不能只看候选人临场表现，要根据掌握的各种背景知识和产品人才参照系，去分析候选人的真实情况，然后再结合企业特定岗位的背景，选择最合适的人选。
关键岗位招人选择真正优秀高潜产品经理(思维决策能力)，而非看重经验、大公司出身、是否参与过知名产品，及加分项(职级高、管人多、毕业学校好、懂技术)。校招毕业学校好通常是减分项(清华北大人才流失风险太高).
产品经理分类 产品经理职位无法标准化，也无法通过培训量产。产品经理的产出受到企业和环境的巨大影响。对一个产品经理能力判断，应按三维归因原理，从产品经理、合作团队和企业、环境机遇这三个维度分别分析还原。
按天赋高低分类
A 类：有深度思考能力或超常同理心。深度思考是指习惯思考事物背后的本质，且在同等条件下，对事物的洞察更深或更快 ；A 类很少见，跟智商、经验、级别都不一定有关，更多是特殊天赋和潜力； B 类：逻辑清晰且有产品心。产品心指喜欢做产品，能从产品工作中感受到乐趣，而非功利心； C 类：不适合从事产品经理职业。逻辑不清晰，同理心明显弱，功利心过重。 如何培养好的产品经理 找一个有潜力的； 将之放到一个有成长性的产品岗位上。 以上就完成 80%，剩下的 20% 是培养对约束条件的权衡取舍，以及识人用人的能力。 面试产品经理 围绕做过的某件事深入提问； 问一件他不熟悉的事，务必是你熟悉而他不熟悉的问题。 产品经理的专业能力，面试时可以从四个角度判断：...</p>
  </div>
  <footer class="entry-footer"><span class="more-meta">  </span><span title='2019-12-21 10:03:00 +0000 UTC'>2019-12-21</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 读书笔记 | 俞军产品方法论" href="https://salmon3g.github.io/posts/reading/product-methodology/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>产品经理常用的工具
    </h2>
  </header>
  <div class="entry-content">
    <p>工作这么多年，有个可能不太好的习惯：喜欢看别人在使用什么软件。如果对方使用的软件好用，我会安装并学习使用；如果对方使用的软件并不那么好用，我会随手推荐一个我用着还不错的软件。正所谓，磨刀不误砍柴工；工欲善其事，必先利其器。
总结了这 9 大类别、30 多个产品经理常用的工具。我个人感觉这些工具还不错，希望你也喜欢；以下也只是一家之言，欢迎交流~
一、思维导图工具 思维导图，又叫心智导图、脑图，是表达发散性思维的有效图形思维工具 ，它简单却又很有效，是一种实用性的思维工具。应用于记忆、学习、思考等的思维“地图”，有利于人脑的扩散思维的展开。
思维导图工具是产品经理的第一把利器，可高效、便捷地记录思维想法和梳理产品规划。推荐的思维导图软件如下：
白纸和笔，拿起便写，请君自由追随心声 MindNode，Mac 下最喜欢的软件，简洁、漂亮 百度脑图，百度出品的良心软件，在线使用，方便保存、同步、分享 XMind，跨平台，功能强大，免费版基本够用 二、问卷调研工具 产品经理在深挖需求和调研的时候，经常使用的工具就是问卷。市面上的问卷工具大同小异，从创建简单、分享方便、填写体验佳、回收数据分析方便等维度推荐一下几家。
腾讯问卷，腾讯出品，用户体验很好，该有的功能都有，分享方便 金数据，陈金洲创办，早期和同类产品相比用户体验较好，是一款小而美的平台，后来被 AdMaster 并购，AdMaster 又于 2018 年下半年和秒针合并(虽然秒针是我前公司，但和推荐金数据没有一毛钱关系) 问卷网/问卷星，都是专业做表单出身，功能全面 三、画产品原型工具 产品经理的工作离不开画产品原型，大到产品架构，小到功能细节和交互，都需要产品经理通过原型体现。不同时期、不同团队对原型的要求也不一样，有的大致示意即可，有的要输入高保真。根据实际场景选择自己顺手的软件即可。
白纸和笔，抄起便画，请君自由如风 Axure，功能强大到没有朋友。画流程图、画原型、做交互、写文档，一个软件全全搞定；画好的原型可导出到本地查看，或者发布到网络预览，非常方便。 Sketch，Mac 下一款轻量级矢量设计软件；功能强大，用户体验优秀，加上大量的素材，可画高保真原型，亦可设计 UI，深受广大产品经理和设计师喜爱。画原型美中不足的是无法做交互。 墨刀，一款轻量级画原型软件，支持协作和云同步，设计和制作交互简单，方便演示。 本人最常使用的是 纸笔 &#43; Axure，偶尔需要高保真原型使用 Sketch. 产品经理切记不要迷失在「设计」当中，不要把自己当设计师用。
四、画流程图工具 不论是产品经理还是研发，工作中都少不了画流程图。流程图通过梳理过程、结果，把一个复杂过程简单而直观的展示出来，进而提高理解效率。
ProcessOn，一款专业的在线画流程图的网站，操作简单，用户体验优秀；浏览器打开就可使用，不区分操作系统，云端保存，共享和协作方便 Visio，差不多是 Windows 系统下排名第一的画流程图软件 Axure/Sketch 等工具也可以画流程图，但是体验相比上面两款工具要差一些 五、团队协作、文档共享工具 产品经理工作中有多个环节需要文档共享以及协作的，例如业务同学写好 BRD 分享给产品经理，产品经理写好 PRD 分享给研发同学；以及一些文件共享，信息通知等。
Confluence，滴滴企业内部使用的知识管理、文档管理平台，很多公司都在使用。Confluence 功能强大，不同部门的空间管理、权限控制、文档编辑、版本快照、信息推送等功能应有尽有；尤其是文档编辑功能异常强大，支持丰富的样式和宏，总之，用过的人都说好 Tower，团队项目协作管理平台，包含任务创建、任务分配、进度跟踪、文档共享等功能，支持清单、看板两种样式。用户体检很好，和微信集成做的很好，使用非常方便，非常适合小团队敏捷开发，10 人以上团队需要付费 Teambition，和 Tower 一样，也是一款非常优秀的团队协作管理平台，同样 10 人以上需要付费，不过按人数付费要不 Tower 贵一些 六、文档处理工具 文档撰写和处理几乎是所有互联网相关职位工作中必不可少的，除了 Windows 下的 Word、Excel、PPT，Mac 下的 Pages、Numbers、Keynote 外，推荐两个可协作的平台。
Google Docs，Google 不作恶，不用担心信息安全，产品用户体验也不错；美中不足的是如果公司默认不能访问，国内几乎没法访问和协作 腾讯文档，腾讯出品，支持 Word、Excel 和 PPT ，不用翻墙即可使用 七、学习和使用的数据产品 数据驱动时代，不论做运营还是做产品经理都离不开查看和分析数据，数据产品经理还要设计和规划数据产品。
Tableau，连续 6 年在 Gartner 分析和商业智能魔力象限中被评为领导者，今年 6 月份被 Salesforce 157 亿美元收购。软件分 Tableau Desktop 和 Tableau Server，滴滴内部都有在使用，我之前负责过一段时间，软件很贵，但物有所值。与之 PK 的是 Microsoft Power BI 和 QlikView，由于没有深入使用，不过多介绍。 BDP，国内海致公司研发的一站式的大数据可视化平台，涵盖几乎主流的数据源接入，托拉拽创建可视化图表，计算能力和权限控制都很不错。 Adobe Analytics，原名 Omniture，2009 年 9 月被 Adobe 收购；功能最强大的网站分析系统，强大的高级细分功能，丰富的主题报表，灵活的自定义配置；美中不足的是由于功能超级强大，配置会比较复杂，还有价格也比较贵。 Google Analytics，免费网站分析系统中功能最强大的，应该也是全球使用量最多的网站分析系统。如果购买了高级版，可与 Omniture 一比高下。操作简单，教程丰富，是一款可快速入手的系统，国内做类似系统的公司和人员应该都研究过它。通过 Google Analytics 认证的数据分析师找工作能加分，我当年也考过，花了 50 美元 :) GrowingIO，功能强大也很实用的网站数据分析系统。前 LinkedIn 高级总监回国创业项目，围绕网站数据分析和促进用户增长。最初版本中有 Mixpanel 的影子，现在已经非常强大了，并增加了一些智能模块。同类型的公司有神策数据，百度技术大佬创业项目。与 Omniture 和 Google Analytics 最大区别是用「事件模型」替代了「页面访问模型」，「事件模型」简单理解是，谁于什么时间在哪里使用什么生了什么，更加适合移动互联网。 Ptengine，也是一款网站分析系统，热力图功能非常强大。 百度指数，主要用来研究关键词搜索趋势，也可以分析网民需求变化及监测媒体舆情趋势；与之类似的是 Google Trends，Google Trends 研究国外更加准确。 七麦，原 ASO100，移动推广数据分析平台。用来监测和分析 APP 在 App Store、Google Play 排名。据说已覆盖全球155个国家/地区App Store、Google Play及国内8大主流安卓市场。类似的还有 App Annie。 AppAdhoc，吆喝科技出品，国内专注做 A/B 测试的平台，创始人是王晔，创业前在 Google 工作。 八、企业信息数据查询工具 做竞品分析时，出来了解产品外，有时还需要了解企业的基本信息、投资、融资等信息。...</p>
  </div>
  <footer class="entry-footer"><span class="more-meta">  </span><span title='2019-08-10 13:54:00 +0000 UTC'>2019-08-10</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 产品经理常用的工具" href="https://salmon3g.github.io/posts/pm/pm-tools/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>商业智能和数据可视化领导者：Tableau
    </h2>
  </header>
  <div class="entry-content">
    <p>Tableau 成立于 2003 年，是斯坦福大学一个计算机科学项目的成果，该项目旨在改善分析流程并让人们能够通过可视化更轻松地使用数据。Tableau 连续 6 年在 Gartner 分析和商业智能魔力象限中被评为领导者，BI(商业智能)和可视化方面十分优秀。
下面是我在公司(滴滴)负责 Tableau 平台的一些信息：
产品：1人(我)，负责平台二次开发(权限系统打通、审批流程设计)，日常运营(问题答疑、权限管控、使用手册撰写、定期培训等) 开发：1-2人，负责定制开发，数仓维护、系统健康度管控 业务部门：整个滴滴公司10&#43;业务部门使用 人数：日均用户数1800&#43; 使用产品：Tableau Desktop &#43; Tableau Server，永久授权版 费用：几百万/年 Tableau主要产品线
Tableau Desktop：本地计算机数据分析、数据探索、可视化神器，也可以将制作好的图表、看板发布到 Server 端，与别人共享。 Tableau Server：用于发布和管理Tableau Desktop制作的仪表盘，实现视图共享，需要把它部署到服务器上，展开协作并共享自己的仪表板中的结果。 Tableau Online：完全托管式云端解决方案。准备数据、制作、分析、协作、发布和共享，都可在 Tableau Online中一站完成。申请账号就能使用，不用自己部署server，适用于有协作需求，但不想部署server的场景。 Tableau Public：免费的服务产品，可把自己创建的视图发布到Public上，公开展示和分享数据。Tableau Public 有非常丰富的数据可视化库，可参考学习和找数据灵感。 Tableau Prep：可视化ETL神器，能更快地对数据进行合并、组织和清理等前期数据预处理工作。处理完的数据可直接导入Desktop，无缝衔接。 特点 &amp; 优势 能长期稳坐BI领域领导者，Tableau有太多的优点，下面简单列举几个：
1、支持丰富的数据源。
市面上用的数据源，常用不常用的，Tableau基本都支持
2、超强的数据可视化能力。
作为数据可视化起家的Tableau，你能想到的图表、看板样式，Tableau基本都能满足，如果不能满足说明你对Tableau的使用还不熟练。我当时参加一位台湾老师的初、中培训课程，看了他对Tableau的使用，惊为天人，当然，这样说明Tableau在数据可视化方面的能力。
想学习更多看板设计，可以在Public网站上找灵感，地址为：https://public.tableau.com/app/discover/viz-of-the-day
3、便捷的交互式可视化设计。
准备好数据源后，只需简单拖拉拽便可以立刻生成漂亮的图表，Tableau会根据你的选择的维度和指标，智能的帮你生成更便于分析的图表。带有条件选择的看板以及多表关联，也可以通过简单配置快速实现。
4、强悍的数据处理能力。
一般计算机配置，用Excel基本很难打开百万行数据的文件，但是把数据导入Tableau，便可以轻松应对，甚至很流畅的进行数据分析探索。这可能和Tableau获得专利的基础技术 VizQL 有直接关系。
5、协作方便。
用户可以将自己创建好的看板发布到自己所在组织的空间里，同组织的同学便可以直接查看和使用。也可以将自己设计好的文件导出分享，别人可在此基础上继续使用和设计。
6、鼓励交互探索。
Tableau看板的设计理念除了让制作者交互分析外，更鼓励查看者通过交互进行探索，不论通过增加筛选项，还是多表联动，还是将看板制作成story，都能很好的实现。而非仅仅像查看图片一样，把它当做一份静止的数据看板。
常用的数据故事类型如时间序列、逐层下钻、横向对比等等。
7、支持脚本语言。
为了避免性能问题并在Tableau中进行复杂的表计算, 用户可以包括Python或R。使用Python脚本, 可以通过对数据包执行数据清理任务来减轻软件的负担。
确定 &amp; 不足 金无足赤，Tableau也有一些不足。例如
看板不能自适应屏幕。如果仪表板是在1920 X 1080的屏幕分辨率上创建的，在2560 X 1440上查看不会自动响应。 二次开发不够灵活。很多功能是黑盒，不过毕竟是商业产品而非开源产品，这个可以理解。 价格昂贵。租赁方式，Server是每个用户每年420美金，Desktop是每个用户每年840美金。滴滴的Desktop是买的永久的，每年续费维保400美金，Server买的是本地部署8core的(这种据说现在没有了)，加上每个Desktop的license，算下来一年几百万，确实贵 其他 平台架构 &amp; 功能简介
除了滴滴外，国内还有很多中大型企业、互联网公司在使用Tableau，例如：银行、航空公司、头条、乐视、华为、首汽。对于数据驱动文化很强的企业来说，在没有足够的人力、时间来自己开发一套BI系统前，采购成熟的商业产品可能效率是最高的。如果Tableau超预算了，也可以考虑其他类似的产品。</p>
  </div>
  <footer class="entry-footer"><span class="more-meta">  </span><span title='2018-12-17 08:33:00 +0000 UTC'>2018-12-17</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to 商业智能和数据可视化领导者：Tableau" href="https://salmon3g.github.io/posts/pm/tableau/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://salmon3g.github.io/page/2/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer"> 
    <span>Copyright &copy; 2009 - 2022 <a href="https://salmon3g.github.io">往东行</a></span>
    <span><a href="https://salmon3g.github.io/index.xml">Sitemap</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>
</html>
